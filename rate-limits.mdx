---
title: 'Rate Limits'
description: 'Understand rate limiting policies, handling rate limits, and plan-specific limits for the Decoded Ventures ERP API.'
---

# Rate Limits

The Decoded Ventures ERP API implements rate limiting to ensure fair usage and maintain service quality for all users. This guide explains our rate limiting policies and how to handle rate limits effectively.

## 📊 Rate Limit Overview

### **Rate Limit Headers**

All API responses include rate limit headers:

```bash
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1640995200
```

### **Header Descriptions**

| Header | Description |
|--------|-------------|
| `X-RateLimit-Limit` | Maximum requests allowed per window |
| `X-RateLimit-Remaining` | Remaining requests in current window |
| `X-RateLimit-Reset` | Unix timestamp when the limit resets |

## 🏗️ Rate Limit Plans

### **Standard Plan**
- **Requests per Hour**: 1,000
- **Burst Limit**: 100 requests per minute
- **Concurrent Requests**: 10
- **Webhook Rate**: 100 events per hour

### **Professional Plan**
- **Requests per Hour**: 10,000
- **Burst Limit**: 1,000 requests per minute
- **Concurrent Requests**: 50
- **Webhook Rate**: 1,000 events per hour

### **Enterprise Plan**
- **Requests per Hour**: 100,000
- **Burst Limit**: 10,000 requests per minute
- **Concurrent Requests**: 200
- **Webhook Rate**: 10,000 events per hour

## 🔄 Rate Limit Windows

### **Hourly Limits**
- **Window**: 1 hour (3,600 seconds)
- **Reset**: Every hour on the hour
- **Tracking**: Per API key

### **Burst Limits**
- **Window**: 1 minute (60 seconds)
- **Reset**: Every minute
- **Purpose**: Prevent API abuse

### **Concurrent Limits**
- **Window**: Real-time
- **Reset**: When request completes
- **Purpose**: Prevent server overload

## 🚫 Rate Limit Responses

### **429 Too Many Requests**

When you exceed your rate limit, you'll receive a 429 response:

```json
{
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Rate limit exceeded",
    "details": "You have exceeded your rate limit. Please try again later.",
    "retryAfter": 3600,
    "limit": 1000,
    "remaining": 0,
    "reset": 1640995200
  }
}
```

### **Response Fields**

| Field | Description |
|-------|-------------|
| `retryAfter` | Seconds to wait before retrying |
| `limit` | Your plan's rate limit |
| `remaining` | Remaining requests (0 when exceeded) |
| `reset` | Unix timestamp when limit resets |

## 🛠️ Handling Rate Limits

### **Exponential Backoff**

Implement exponential backoff when you hit rate limits:

```javascript
async function makeApiRequest(url, options, retries = 3) {
  try {
    const response = await fetch(url, options);
    
    if (response.status === 429) {
      const error = await response.json();
      const retryAfter = error.error.retryAfter || 60;
      
      if (retries > 0) {
        console.log(`Rate limited. Retrying in ${retryAfter} seconds...`);
        await new Promise(resolve => setTimeout(resolve, retryAfter * 1000));
        return makeApiRequest(url, options, retries - 1);
      }
    }
    
    return response;
  } catch (error) {
    throw error;
  }
}
```

### **Rate Limit Monitoring**

Monitor your rate limit usage:

```javascript
function checkRateLimits(response) {
  const limit = response.headers.get('X-RateLimit-Limit');
  const remaining = response.headers.get('X-RateLimit-Remaining');
  const reset = response.headers.get('X-RateLimit-Reset');
  
  const usagePercentage = ((limit - remaining) / limit) * 100;
  
  if (usagePercentage > 80) {
    console.warn(`Rate limit usage: ${usagePercentage.toFixed(1)}%`);
  }
  
  return {
    limit: parseInt(limit),
    remaining: parseInt(remaining),
    reset: parseInt(reset),
    usagePercentage
  };
}
```

### **Request Queuing**

For high-volume applications, implement request queuing:

```javascript
class RateLimitQueue {
  constructor(maxConcurrent = 5) {
    this.queue = [];
    this.running = 0;
    this.maxConcurrent = maxConcurrent;
  }
  
  async add(requestFn) {
    return new Promise((resolve, reject) => {
      this.queue.push({ requestFn, resolve, reject });
      this.process();
    });
  }
  
  async process() {
    if (this.running >= this.maxConcurrent || this.queue.length === 0) {
      return;
    }
    
    this.running++;
    const { requestFn, resolve, reject } = this.queue.shift();
    
    try {
      const result = await requestFn();
      resolve(result);
    } catch (error) {
      reject(error);
    } finally {
      this.running--;
      this.process();
    }
  }
}

// Usage
const queue = new RateLimitQueue(5);

const requests = [
  () => api.finance.getRecords({ teamId: 'team_1' }),
  () => api.sales.getLeads({ teamId: 'team_1' }),
  () => api.hr.getEmployees({ teamId: 'team_1' })
];

const results = await Promise.all(
  requests.map(request => queue.add(request))
);
```

## 📈 Rate Limit by Endpoint

### **High-Frequency Endpoints**

These endpoints have stricter rate limits:

| Endpoint | Standard | Professional | Enterprise |
|----------|----------|--------------|------------|
| **GET /health** | 100/min | 1,000/min | 10,000/min |
| **GET /getFinanceRecords** | 60/min | 600/min | 6,000/min |
| **GET /listInvoices** | 60/min | 600/min | 6,000/min |
| **GET /listSalesLeads** | 60/min | 600/min | 6,000/min |

### **AI Agent Endpoints**

AI endpoints have different limits due to processing time:

| Endpoint | Standard | Professional | Enterprise |
|----------|----------|--------------|------------|
| **POST /executeAgent** | 10/min | 100/min | 1,000/min |
| **POST /salesAgent** | 10/min | 100/min | 1,000/min |
| **POST /financeAgentAnalyze** | 10/min | 100/min | 1,000/min |

### **Payment Endpoints**

Payment endpoints have security-based limits:

| Endpoint | Standard | Professional | Enterprise |
|----------|----------|--------------|------------|
| **POST /initiateSTKPush** | 30/min | 300/min | 3,000/min |
| **POST /initiateFlickCheckoutV2** | 30/min | 300/min | 3,000/min |
| **POST /initiateFlutterwaveCheckout** | 30/min | 300/min | 3,000/min |

## 🔐 Rate Limit by Authentication

### **API Key Limits**

Rate limits are applied per API key:

- **Single API Key**: All limits apply to the key
- **Multiple API Keys**: Each key has its own limits
- **Team-Based**: Limits are shared within a team

### **IP-Based Limits**

Additional IP-based limits for security:

| Plan | IP Limit | Burst Limit |
|------|----------|-------------|
| **Standard** | 5,000/hour | 500/minute |
| **Professional** | 50,000/hour | 5,000/minute |
| **Enterprise** | 500,000/hour | 50,000/minute |

## 📊 Monitoring and Analytics

### **Rate Limit Analytics**

Track your rate limit usage:

```javascript
// Get rate limit analytics
const analytics = await api.getRateLimitAnalytics({
  teamId: 'team_123',
  startDate: '2024-01-01',
  endDate: '2024-01-31'
});

console.log('Rate limit usage:', analytics);
```

**Response:**
```json
{
  "status": "success",
  "data": {
    "period": {
      "startDate": "2024-01-01",
      "endDate": "2024-01-31"
    },
    "usage": {
      "totalRequests": 45000,
      "rateLimitHits": 5,
      "averageUsage": 75,
      "peakUsage": 95
    },
    "byEndpoint": {
      "getFinanceRecords": {
        "requests": 15000,
        "rateLimitHits": 2
      },
      "listInvoices": {
        "requests": 12000,
        "rateLimitHits": 1
      }
    },
    "recommendations": [
      "Consider upgrading to Professional plan",
      "Implement request caching for getFinanceRecords"
    ]
  }
}
```

### **Real-Time Monitoring**

Set up real-time rate limit monitoring:

```javascript
// Webhook for rate limit alerts
app.post('/webhooks/rate-limits', (req, res) => {
  const { event, data } = req.body;
  
  if (event === 'rate_limit.warning') {
    console.log('Rate limit warning:', data);
    // Send alert to team
  }
  
  if (event === 'rate_limit.exceeded') {
    console.log('Rate limit exceeded:', data);
    // Pause non-critical requests
  }
  
  res.status(200).json({ received: true });
});
```

## 🚀 Best Practices

### **Optimize Request Frequency**

1. **Batch Requests**: Combine multiple requests when possible
2. **Cache Responses**: Cache frequently accessed data
3. **Use Webhooks**: Subscribe to events instead of polling
4. **Implement Pagination**: Use pagination for large datasets

### **Handle Rate Limits Gracefully**

1. **Exponential Backoff**: Implement retry logic with backoff
2. **Queue Requests**: Queue requests when approaching limits
3. **Monitor Usage**: Track rate limit usage proactively
4. **Plan Upgrades**: Upgrade plans before hitting limits

### **Code Examples**

#### **JavaScript/TypeScript**

```javascript
import { DecodedVenturesAPI } from '@decodedventures/erp-api';

const api = new DecodedVenturesAPI({
  apiKey: 'your-api-key',
  rateLimitConfig: {
    maxRetries: 3,
    backoffMultiplier: 2,
    maxBackoff: 300
  }
});

// API automatically handles rate limits
const records = await api.finance.getRecords({
  teamId: 'team_123'
});
```

#### **Python**

```python
from decodedventures import DecodedVenturesAPI
import time

api = DecodedVenturesAPI(
    api_key='your-api-key',
    rate_limit_config={
        'max_retries': 3,
        'backoff_multiplier': 2,
        'max_backoff': 300
    }
)

# API automatically handles rate limits
records = api.finance.get_records(team_id='team_123')
```

#### **PHP**

```php
use DecodedVentures\DecodedVenturesAPI;

$api = new DecodedVenturesAPI('your-api-key', [
    'rate_limit_config' => [
        'max_retries' => 3,
        'backoff_multiplier' => 2,
        'max_backoff' => 300
    ]
]);

// API automatically handles rate limits
$records = $api->finance->getRecords(['teamId' => 'team_123']);
```

## 🔧 Configuration

### **Environment Variables**

```bash
# Rate limit configuration
DECODED_RATE_LIMIT_MAX_RETRIES=3
DECODED_RATE_LIMIT_BACKOFF_MULTIPLIER=2
DECODED_RATE_LIMIT_MAX_BACKOFF=300
```

### **SDK Configuration**

```javascript
const api = new DecodedVenturesAPI({
  apiKey: 'your-api-key',
  rateLimitConfig: {
    maxRetries: 3,
    backoffMultiplier: 2,
    maxBackoff: 300,
    enableQueue: true,
    maxConcurrent: 5
  }
});
```

## 📞 Support

### **Rate Limit Issues**

If you're experiencing rate limit issues:

1. **Check Your Usage**: Monitor your current usage
2. **Review Your Plan**: Consider upgrading your plan
3. **Optimize Requests**: Implement best practices
4. **Contact Support**: Reach out for assistance

### **Getting Help**

- **Documentation**: [docs.decoded.africa](https://docs.decoded.africa)
- **Email**: support@decoded.africa
- **Discord**: [Join our community](https://discord.gg/decodedventures)

## 📖 Related Documentation

- [Authentication](/authentication) - Learn about API authentication
- [Error Handling](/errors) - Handle API errors effectively
- [Webhooks](/webhooks) - Real-time event notifications
