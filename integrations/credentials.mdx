---
title: 'Credential Management'
description: 'Securely store and manage API credentials for third-party integrations using Google Secret Manager. Each ERP client has their own isolated set of credentials.'
---

# Credential Management

The Decoded Ventures ERP API provides a secure credential management system that allows ERP clients to store and manage their API keys and credentials for various third-party integrations. All credentials are encrypted and stored using Google Secret Manager for enterprise-grade security.

## üîê Security Features

- **Google Secret Manager**: Enterprise-grade credential storage
- **Client Isolation**: Each ERP client has their own isolated set of credentials
- **Encryption at Rest**: All credentials are encrypted
- **Audit Trail**: Complete history of credential changes
- **Automatic Verification**: Real-time credential validation
- **Access Control**: Role-based access to credentials
- **Versioning**: Track all credential changes

## üè¢ Client-Specific Credentials

Each ERP client has their own isolated set of credentials stored in Google Secret Manager with the naming pattern:

```
{client_id}_{credential_type}
```

### Examples:
- `demo-client-001_FLICK_API`
- `demo-client-001_OPENAI_API`
- `production-client-002_TWILIO_API`
- `production-client-002_AWS_SES`

### Benefits:
- **Complete Isolation**: No credential sharing between clients
- **Scalable**: Supports unlimited clients with up to 35 credential types each
- **Secure**: Each client's credentials are stored separately
- **Flexible**: Clients only create secrets for services they actually use

## üìã Supported Credential Types (35 Total)

### Payment Providers (4 types)
- **FLICK_API** - International card payment processing
- **FLUTTERWAVE_API** - Global payments and payouts
- **MPESA_API** - Mobile money for Kenya
- **PAYPAL_API** - PayPal payouts

### Mobile Money Providers (6 types)
- **AIRTEL_MONEY** - Airtel mobile money
- **MTN_MONEY** - MTN mobile money
- **ORANGE_MONEY** - Orange mobile money
- **VODAFONE_CASH** - Vodafone mobile money
- **MOOV_MONEY** - Moov mobile money
- **ECOCASH** - EcoCash mobile money

### AI Providers (4 types)
- **OPENAI_API** - OpenAI services
- **CLAUDE_API** - Anthropic Claude
- **GEMINI_API** - Google Gemini
- **VERTEX_AI** - Google Vertex AI

### Communication Services (4 types)
- **TWILIO_API** - SMS and voice
- **SENDGRID_API** - Email delivery
- **SLACK_API** - Slack integration
- **TELEGRAM_BOT** - Telegram bot

### AWS Services (4 types)
- **AWS_SES** - Email sending
- **AWS_ROUTE53** - DNS management
- **AWS_S3** - File storage
- **AWS_LAMBDA** - Serverless functions

### Google Services (3 types)
- **GOOGLE_ADS** - Google Ads API
- **GOOGLE_ANALYTICS** - Google Analytics
- **GOOGLE_CLOUD_STORAGE** - Cloud Storage

### Social Media APIs (6 types)
- **FACEBOOK_ADS** - Facebook Ads
- **TWITTER_ADS** - X (Twitter) Ads
- **LINKEDIN_ADS** - LinkedIn Ads
- **TIKTOK_ADS** - TikTok Ads
- **PINTEREST_ADS** - Pinterest Ads
- **SNAPCHAT_ADS** - Snapchat Ads

### Crypto Services (3 types)
- **CRYPTO_GATEWAY** - Crypto payment gateway
- **BITCOIN_NODE** - Bitcoin node access
- **ETHEREUM_NODE** - Ethereum node access

### Other (1 type)
- **CUSTOM_API** - Custom API integrations

## üöÄ How to Manage Credentials

### Option 1: Web/Mobile Platform (Recommended)

ERP clients can manage their credentials through the user-friendly web and mobile interfaces:

#### Web Platform (`erp.decoded.africa`)
1. **Login** to your ERP dashboard
2. **Navigate** to Settings ‚Üí Credentials
3. **Add/Update** credentials for your chosen services
4. **Verify** credentials automatically
5. **Monitor** credential status and history

#### Mobile App
1. **Open** the ERP mobile app
2. **Go to** Profile ‚Üí Credentials
3. **Manage** your API keys and tokens
4. **Receive** notifications for credential updates

### Option 2: Direct API Calls

For programmatic access, ERP clients can call the credential management endpoints directly:

## üì° API Endpoints

### Store or Update Credential

Store a new credential or update an existing one.

```http
POST /storeClientCredential
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API",
  "credential_value": "your_flick_api_key",
  "credential_name": "Flick API Key",
  "metadata": {
    "environment": "production",
    "notes": "Production Flick credentials"
  },
  "notify_on_update": true
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Credential stored successfully",
  "data": {
    "credential_id": "your-client-id_FLICK_API",
    "secret_version": "projects/valid-chess-266603/secrets/erp-client-your-client-id-FLICK_API/versions/1",
    "status": "active"
  }
}
```

### Get Credential

Retrieve a specific credential.

```http
POST /getClientCredential
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API"
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Credential retrieved successfully",
  "data": {
    "id": "your-client-id_FLICK_API",
    "client_id": "your-client-id",
    "credential_type": "FLICK_API",
    "credential_name": "Flick API Key",
    "status": "active",
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z",
    "credential_value": "your_flick_api_key"
  }
}
```

### List Credentials

Get all credentials for a client.

```http
POST /listClientCredentials
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API" // Optional filter
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Credentials retrieved successfully",
  "data": {
    "credentials": [
      {
        "id": "your-client-id_FLICK_API",
        "client_id": "your-client-id",
        "credential_type": "FLICK_API",
        "credential_name": "Flick API Key",
        "status": "active",
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-01T00:00:00Z"
      }
    ],
    "total": 1
  }
}
```

### Verify Credential

Verify if a credential is valid by testing it against the provider's API.

```http
POST /verifyClientCredential
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API"
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Flick API credentials verified successfully",
  "data": {
    "is_valid": true,
    "verification_message": "Flick API credentials verified successfully",
    "verified_at": "2024-01-01T00:00:00Z"
  }
}
```

### Delete Credential

Remove a credential from the system.

```http
POST /deleteClientCredential
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API"
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Credential deleted successfully"
}
```

### Get Credential History

View the history of changes for a credential.

```http
POST /getCredentialHistory
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credential_type": "FLICK_API", // Optional filter
  "limit": 50
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Credential history retrieved successfully",
  "data": {
    "history": [
      {
        "id": "history_123",
        "client_id": "your-client-id",
        "credential_type": "FLICK_API",
        "action": "updated",
        "updated_at": "2024-01-01T00:00:00Z",
        "metadata": {
          "version": "projects/valid-chess-266603/secrets/erp-client-your-client-id-FLICK_API/versions/2",
          "updated_by": "user_123"
        }
      }
    ],
    "total": 1
  }
}
```

### Bulk Update Credentials

Update multiple credentials at once.

```http
POST /bulkUpdateCredentials
```

**Request Body:**
```json
{
  "client_id": "your-client-id",
  "credentials": [
    {
      "credential_type": "FLICK_API",
      "credential_value": "new_flick_api_key",
      "credential_name": "Flick API Key"
    },
    {
      "credential_type": "OPENAI_API",
      "credential_value": "new_openai_api_key",
      "credential_name": "OpenAI API Key"
    }
  ]
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Bulk update completed",
  "data": {
    "results": [
      {
        "credential_type": "FLICK_API",
        "status": "success",
        "data": {
          "credential_id": "your-client-id_FLICK_API",
          "secret_version": "projects/valid-chess-266603/secrets/erp-client-your-client-id-FLICK_API/versions/3",
          "status": "active"
        }
      }
    ],
    "total": 2,
    "successful": 2,
    "failed": 0
  }
}
```

## üìù Code Examples

### JavaScript/TypeScript

```javascript
import { DecodedVenturesAPI } from '@decodedventures/erp-api';

const api = new DecodedVenturesAPI({
  apiKey: 'your-api-key'
});

// Store Flick API credentials
await api.credentials.store({
  clientId: 'your-client-id',
  credentialType: 'FLICK_API',
  credentialValue: 'your_flick_api_key',
  credentialName: 'Flick API Key',
  metadata: {
    environment: 'production'
  },
  notifyOnUpdate: true
});

// Store OpenAI credentials
await api.credentials.store({
  clientId: 'your-client-id',
  credentialType: 'OPENAI_API',
  credentialValue: 'your_openai_api_key',
  credentialName: 'OpenAI API Key'
});

// Store Twilio credentials
await api.credentials.store({
  clientId: 'your-client-id',
  credentialType: 'TWILIO_API',
  credentialValue: JSON.stringify({
    account_sid: 'AC...',
    auth_token: 'your_auth_token'
  }),
  credentialName: 'Twilio API Credentials'
});

// Verify credentials
const verification = await api.credentials.verify({
  clientId: 'your-client-id',
  credentialType: 'FLICK_API'
});

console.log(verification.data.is_valid); // true/false
```

### Python

```python
from decodedventures import DecodedVenturesAPI

api = DecodedVenturesAPI(api_key='your-api-key')

# Store credentials
api.credentials.store(
    client_id='your-client-id',
    credential_type='FLICK_API',
    credential_value='your_flick_api_key',
    credential_name='Flick API Key',
    metadata={'environment': 'production'},
    notify_on_update=True
)

# Get credentials
credential = api.credentials.get(
    client_id='your-client-id',
    credential_type='FLICK_API'
)

print(credential['data']['credential_value'])
```

### PHP

```php
use DecodedVentures\DecodedVenturesAPI;

$api = new DecodedVenturesAPI('your-api-key');

// Store credentials
$api->credentials->store([
    'client_id' => 'your-client-id',
    'credential_type' => 'FLICK_API',
    'credential_value' => 'your_flick_api_key',
    'credential_name' => 'Flick API Key',
    'metadata' => ['environment' => 'production'],
    'notify_on_update' => true
]);

// List credentials
$credentials = $api->credentials->list([
    'client_id' => 'your-client-id'
]);

foreach ($credentials['data']['credentials'] as $credential) {
    echo $credential['credential_name'] . "\n";
}
```

## üîî Notifications

When credentials are updated, you can receive notifications via:

- **Email**: Sent to the client's registered email address
- **SMS**: Sent to the client's registered phone number
- **Webhook**: Sent to your configured webhook URL

### Webhook Payload

```json
{
  "type": "credential_updated",
  "client_id": "your-client-id",
  "credential_type": "FLICK_API",
  "credential_name": "Flick API Key",
  "notification_type": "webhook",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

## üõ°Ô∏è Security Best Practices

1. **Rotate Credentials Regularly**: Update your API keys periodically
2. **Use Environment-Specific Credentials**: Separate sandbox and production credentials
3. **Monitor Credential Usage**: Check credential history regularly
4. **Verify Credentials**: Use the verification endpoint to ensure credentials are valid
5. **Enable Notifications**: Get notified when credentials are updated
6. **Use Strong Credentials**: Generate strong, unique API keys
7. **Client Isolation**: Never share credentials between different ERP clients

## üìä Credential Status

Credentials can have the following statuses:

- **active**: Credential is valid and ready to use
- **inactive**: Credential is stored but not verified
- **expired**: Credential has expired
- **pending_verification**: Credential is being verified

## üîç Error Handling

Common error responses:

```json
{
  "error": {
    "code": "CREDENTIAL_NOT_FOUND",
    "message": "Credential not found",
    "details": "The specified credential does not exist for this client"
  }
}
```

```json
{
  "error": {
    "code": "INVALID_CREDENTIAL",
    "message": "Invalid credential",
    "details": "The provided credential value is invalid"
  }
}
```

```json
{
  "error": {
    "code": "VERIFICATION_FAILED",
    "message": "Credential verification failed",
    "details": "Unable to verify the credential with the provider"
  }
}
```

## üìö Related Documentation

- [Authentication](/authentication) - Learn about API authentication
- [Payment APIs](/payments/mpesa) - Integrate payment processing
- [AI Agents](/agents/overview) - Use AI-powered features
- [Webhooks](/webhooks) - Set up webhook notifications
- [Client Onboarding](/onboarding) - Set up your ERP account
